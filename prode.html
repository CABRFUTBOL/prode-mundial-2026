<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Prode Mundial 2026</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1, h2, h3 { margin-bottom: 10px; }
    div { margin-bottom: 5px; }
    input { width: 50px; margin: 0 5px; }
    button { margin: 10px 0; padding: 5px 10px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Prode Mundial 2026</h1>

  <!-- Div para los pronósticos -->
  <div id="pronosticos"></div>

  <!-- Botón para guardar pronósticos -->
  <button onclick="guardarPronosticos()">Guardar pronósticos</button>
  <div id="mensaje"></div>

  <!-- Div para la tabla -->
  <div id="tabla"></div>

  <script>
    // ----- Datos -----
    const partidos = [
      { local: "Argentina", visitante: "Brasil" },
      { local: "México", visitante: "España" },
      { local: "Francia", visitante: "Alemania" },
      { local: "Inglaterra", visitante: "Italia" },
      { local: "Portugal", visitante: "Holanda" }
    ];

    const jugadores = [
      { nombre: "Juan", pronosticos: [] },
      { nombre: "María", pronosticos: [] },
      { nombre: "Carlos", pronosticos: [] },
      { nombre: "Lucía", pronosticos: [] },
      { nombre: "Sofía", pronosticos: [] }
    ];

    const resultados = [
      { local: "Argentina", visitante: "Brasil", golesLocal: 2, golesVisitante: 1 },
      { local: "México", visitante: "España", golesLocal: 1, golesVisitante: 1 },
      { local: "Francia", visitante: "Alemania", golesLocal: 0, golesVisitante: 3 },
      { local: "Inglaterra", visitante: "Italia", golesLocal: 2, golesVisitante: 2 },
      { local: "Portugal", visitante: "Holanda", golesLocal: 1, golesVisitante: 0 }
    ];

    // ----- Generar formulario de pronósticos -----
    function generarFormulario() {
      const div = document.getElementById("pronosticos");
      div.innerHTML = "";

      jugadores.forEach((jugador, j) => {
        div.innerHTML += `<h3>${jugador.nombre}</h3>`;
        partidos.forEach((p, i) => {
          div.innerHTML += `
            <div>
              ${p.local} vs ${p.visitante}:
              <input type="number" id="g${j}-${i}-local" min="0" placeholder="Goles ${p.local}">
              <input type="number" id="g${j}-${i}-visitante" min="0" placeholder="Goles ${p.visitante}">
            </div>
          `;
        });
      });
    }

    // ----- Guardar pronósticos -----
    function guardarPronosticos() {
      jugadores.forEach((jugador, j) => {
        jugador.pronosticos = [];
        partidos.forEach((p, i) => {
          const golesLocal = parseInt(document.getElementById(`g${j}-${i}-local`).value) || 0;
          const golesVisitante = parseInt(document.getElementById(`g${j}-${i}-visitante`).value) || 0;
          jugador.pronosticos.push({ golesLocal, golesVisitante, puntaje: 0 });
        });
      });
      document.getElementById("mensaje").innerText = "Pronósticos guardados correctamente!";
    }

    // ----- Calcular puntajes -----
    function calcularPuntajes() {
      jugadores.forEach(jugador => {
        jugador.pronosticos.forEach((pronostico, i) => {
          const real = resultados[i];
          if(pronostico.golesLocal === real.golesLocal && pronostico.golesVisitante === real.golesVisitante){
            pronostico.puntaje = 3; // Resultado exacto
          } else if((pronostico.golesLocal - pronostico.golesVisitante) === (real.golesLocal - real.golesVisitante)){
            pronostico.puntaje = 1; // Acertó ganador/empate
          } else {
            pronostico.puntaje = 0;
          }
        });
        jugador.puntajeTotal = jugador.pronosticos.reduce((sum, p) => sum + p.puntaje, 0);
      });
    }

    // ----- Mostrar tabla de posiciones -----
    function mostrarTabla() {
      calcularPuntajes();
      const div = document.getElementById("tabla");
      div.innerHTML = "<h2>Tabla de posiciones</h2>";
      const ordenados = [...jugadores].sort((a,b) => b.puntajeTotal - a.puntajeTotal);
      ordenados.forEach(j => {
        div.innerHTML += `<div>${j.nombre}: ${j.puntajeTotal} pts</div>`;
      });
    }

    // ----- Ejecutar después de que cargue la página -----
    window.onload = function() {
      generarFormulario();

      // Crear botón de tabla automáticamente
      const tablaDiv = document.getElementById("tabla");
      if (!document.getElementById("btnTabla")) {
        const botonTabla = document.createElement("button");
        botonTabla.id = "btnTabla";
        botonTabla.innerText = "Ver tabla de posiciones";
        botonTabla.onclick = mostrarTabla;
        tablaDiv.parentNode.insertBefore(botonTabla, tablaDiv);
      }
    };
  </script>
</body>
</html>
